var width=960,height=500,svg=d3.select("#map").append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 960 500").append("g"),projection=d3.geoOrthographic(),path=d3.geoPath().projection(projection),drag=d3.drag().on("drag",(function(){var t=projection.rotate(),e=.1*d3.event.dx;d3.event.dy;projection.rotate([t[0]-e,t[1]]),svg.selectAll("path").attr("d",path)})),tooltip=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);Promise.all([d3.json("https://cdn.jsdelivr.net/npm/world-atlas@2.0.2/countries-110m.json"),d3.json("/assets/json/countries.json")]).then((function([t,e]){const o=e.map((t=>t.country)),a={};e.forEach((t=>{a[t.country]=t.tip})),svg.append("g").selectAll("path").data(topojson.feature(t,t.objects.countries).features).enter().append("path").attr("d",path).style("fill",(function(t){return o.includes(t.properties.name)?"var(--global-highlight-color)":"var(--global-text-color-light)"})).on("mouseover",(function(t){const e=t.properties.name,n=a[e];o.includes(t.properties.name)&&(tooltip.transition().duration(200).style("opacity",.9),tooltip.html(n?e+", "+n:e).style("left",event.pageX+5+"px").style("top",event.pageY-28+"px"))})).on("mouseout",(function(){tooltip.style("opacity",0)}))})),svg.append("rect").attr("width",width).attr("height",height).attr("fill","transparent").lower(),svg.call(drag);